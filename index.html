<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ุฃูุตุงุฑู - ุฑูููู ูู ุงูุฐูุฑ</title>
    <meta name="description" content="ุชุทุจูู ุฃูุตุงุฑู ููุฃุฐูุงุฑ ูุงูุชุณุจูุญ - ุชุฌุฑุจุฉ ุฅููุงููุฉ ูุชูุงููุฉ">

    <!-- Mobile Optimizations -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ุฃูุตุงุฑู">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@400;600;800&family=Outfit:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Premium Splash Screen -->
    <div id="splash-screen">
        <div class="splash-content">
            <img src="app_logo.svg" alt="ุฃูุตุงุฑู" class="splash-logo">
            <div class="splash-loader"></div>
        </div>
    </div>

    <div id="app">
        <header class="app-header">
            <div class="logo-container">
                <h1 class="app-name">ุฃูุตุงุฑู</h1>
                <p id="app-subtitle">ุฑูููู ูู ุงูุฐููุฑ</p>
            </div>
            <button id="theme-toggle" class="icon-btn" onclick="toggleTheme()" aria-label="ุชุจุฏูู ุงููุถุน">
                <i class="ph ph-moon-stars"></i>
            </button>
        </header>

        <main id="main-content">
            <!-- VIEW: HOME -->
            <div id="view-home" class="view-section fade-in">
                <div class="greeting-section" style="margin-bottom: 1.5rem;">
                    <h2 class="section-title">ุงูุฃูุณุงู</h2>
                    <p class="section-subtitle">ุงุฎุชุฑ ูุณูุงู ููุจุฏุก</p>
                </div>

                <!-- Resume Reading Card (New) -->
                <div id="resume-quran-card" class="category-card hidden" onclick="resumeQuranReading()"
                    style="margin-bottom: 2rem; flex-direction: row; gap: 1.25rem; padding: 1.25rem; background: var(--primary-light); border-color: var(--primary-color); width: 100%;">
                    <div class="icon-wrapper"
                        style="background: var(--primary-color); color: white; width: 48px; height: 48px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 1.4rem;">
                        <i class="ph ph-bookmarks"></i>
                    </div>
                    <div style="flex: 1; text-align: right;">
                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0; font-weight: 600;">ูุงุตู
                            ุงููุฑุงุกุฉ ูู ุญูุซ ุชูููุช</p>
                        <h4 id="resume-surah-name" style="font-size: 1.1rem; font-weight: 800; margin: 0.25rem 0 0;">
                            ุณูุฑุฉ...</h4>
                    </div>
                    <i class="ph ph-play-circle" style="font-size: 2rem; color: var(--primary-color);"></i>
                </div>

                <div class="categories-grid">
                    <div class="category-card" onclick="openAdhkar('morning')">
                        <i class="ph ph-sun category-icon" style="color: #fbbf24;"></i>
                        <h3 class="category-title">ุฃุฐูุงุฑ ุงูุตุจุงุญ</h3>
                    </div>
                    <div class="category-card" onclick="openAdhkar('evening')">
                        <i class="ph ph-moon-stars category-icon" style="color: #6366f1;"></i>
                        <h3 class="category-title">ุฃุฐูุงุฑ ุงููุณุงุก</h3>
                    </div>
                    <div class="category-card" onclick="openAdhkar('sleep')">
                        <i class="ph ph-moon category-icon" style="color: #8b5cf6;"></i>
                        <h3 class="category-title">ุฃุฐูุงุฑ ุงูููู</h3>
                    </div>
                    <div class="category-card" onclick="openAdhkar('wakeup')">
                        <i class="ph ph-brightness-up category-icon" style="color: #f59e0b;"></i>
                        <h3 class="category-title">ุงูุงุณุชููุงุธ</h3>
                    </div>
                    <div class="category-card" onclick="openAdhkar('post_prayer')">
                        <i class="ph ph-hands-praying category-icon" style="color: #10b981;"></i>
                        <h3 class="category-title">ุจุนุฏ ุงูุตูุงุฉ</h3>
                    </div>
                    <div class="category-card" onclick="openQuranList()">
                        <i class="ph ph-book-open category-icon" style="color: #059669;"></i>
                        <h3 class="category-title">ุงููุฑุขู ุงููุฑูู</h3>
                    </div>
                </div>

                <!-- Supplications Section -->
                <div style="margin-top: 2rem;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                        <h2 class="section-title" style="margin: 0;">ุฃุฏุนูุฉ ูููุงุฌุงุฉ</h2>
                    </div>
                    <div class="categories-grid">
                        <div class="category-card fade-in" onclick="openAdhkar('quranic_duas')">
                            <div class="icon-wrapper" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                                <i class="ph ph-book-open"></i>
                            </div>
                            <h3 class="category-title">ุฃุฏุนูุฉ ูุฑุขููุฉ</h3>
                            <p class="category-subtitle">ูู ุงููุฑุขู ุงููุฑูู</p>
                        </div>
                        <div class="category-card fade-in" onclick="openAdhkar('prophetic_duas')">
                            <div class="icon-wrapper" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                                <i class="ph ph-star"></i>
                            </div>
                            <h3 class="category-title">ุฃุฏุนูุฉ ูุจููุฉ</h3>
                            <p class="category-subtitle">ูู ุงูุณูุฉ ุงููุจููุฉ</p>
                        </div>
                        <div class="category-card fade-in" onclick="openAdhkar('duas_kurb')">
                            <div class="icon-wrapper" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                                <i class="ph ph-heart-break"></i>
                            </div>
                            <h3 class="category-title">ุฃุฏุนูุฉ ุงููุฑุจ</h3>
                            <p class="category-subtitle">ููุชูุฑูุฌ ูุงููู</p>
                        </div>
                        <div class="category-card fade-in" onclick="openAdhkar('travel_istikhara')">
                            <div class="icon-wrapper" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                                <i class="ph ph-airplane-tilt"></i>
                            </div>
                            <h3 class="category-title">ุงูุณูุฑ ูููุงุณุจุงุช</h3>
                            <p class="category-subtitle">ุงุณุชุฎุงุฑุฉุ ุณูุฑ..</p>
                        </div>
                    </div>
                </div>
                <!-- Prayer Times Widget (New) -->
                <div class="category-card" onclick="showView('prayer-times')"
                    style="margin-top: 1rem; flex-direction: row; justify-content: space-between; width: 100%; padding: 1.5rem; background: linear-gradient(135deg, #0f172a, #1e293b); border: 1px solid #334155;">
                    <div style="display: flex; flex-direction: column; align-items: flex-start;">
                        <span style="font-size: 0.8rem; color: #94a3b8; margin-bottom: 0.25rem;">ุงูุตูุงุฉ ุงููุงุฏูุฉ</span>
                        <h3 id="next-prayer-name-home" style="font-size: 1.4rem; color: white; margin-bottom: 0.25rem;">
                            ...</h3>
                        <span id="next-prayer-time-home"
                            style="font-size: 1.1rem; color: var(--primary-color); font-weight: 700;">--:--</span>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: flex-end; justify-content: center;">
                        <i class="ph ph-mosque" style="font-size: 2.5rem; color: rgba(255,255,255,0.1);"></i>
                        <span id="prayer-countdown-home"
                            style="font-size: 0.9rem; color: #fbbf24; margin-top: 0.5rem;">--:--:--</span>
                    </div>
                </div>

                <div class="greeting-section" style="margin-top: 2.5rem; margin-bottom: 1.5rem;">
                    <h2 class="section-title" style="color: #10b981;">๐ ุฃุฐูุงุฑ ุฑูุถุงู</h2>
                    <p class="section-subtitle">ุชูุจู ุงููู ููุง ููููู</p>
                </div>

                <div class="categories-grid" style="grid-template-columns: 1fr;">
                    <div class="category-card ramadan-card" onclick="openRamadanList('ramadan_before_iftar')"
                        style="background: linear-gradient(135deg, #064e3b, #022c22); border-color: #059669; flex-direction: row; gap: 1.5rem; justify-content: flex-start; padding: 1.25rem 2rem;">
                        <i class="ph ph-bowl-food category-icon" style="margin: 0;"></i>
                        <h3 class="category-title" style="color: white; font-size: 1.1rem;">ุฃุฐูุงุฑ ูุจู ุงูุฅูุทุงุฑ</h3>
                    </div>
                    <div class="category-card ramadan-card" onclick="openRamadanList('ramadan_after_iftar')"
                        style="background: linear-gradient(135deg, #064e3b, #022c22); border-color: #059669; flex-direction: row; gap: 1.5rem; justify-content: flex-start; padding: 1.25rem 2rem;">
                        <i class="ph ph-confetti category-icon" style="margin: 0;"></i>
                        <h3 class="category-title" style="color: white; font-size: 1.1rem;">ุฃุฐูุงุฑ ุจุนุฏ ุงูุฅูุทุงุฑ</h3>
                    </div>
                    <div class="category-card ramadan-card" onclick="openRamadanList('ramadan_night_qiyam')"
                        style="background: linear-gradient(135deg, #064e3b, #022c22); border-color: #059669; flex-direction: row; gap: 1.5rem; justify-content: flex-start; padding: 1.25rem 2rem;">
                        <i class="ph ph-star-and-crescent category-icon" style="margin: 0;"></i>
                        <h3 class="category-title" style="color: white; font-size: 1.1rem;">ุฃุฐูุงุฑ ุงูููุงู</h3>
                    </div>
                </div>
            </div>

            <!-- VIEW: PRAYER TIMES -->
            <div id="view-prayer-times" class="view-section hidden">
                <div class="view-header"
                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                    <button class="icon-btn" onclick="showView('home')"><i class="ph ph-caret-right"></i></button>
                    <h2 class="section-title" style="margin: 0;">ููุงููุช ุงูุตูุงุฉ</h2>
                    <button class="icon-btn" onclick="fetchPrayerTimes(true)"><i
                            class="ph ph-arrows-clockwise"></i></button>
                </div>

                <!-- Location & Date -->
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div
                        style="display: inline-flex; align-items: center; gap: 0.5rem; background: var(--bg-color); padding: 0.5rem 1rem; border-radius: var(--radius-full); border: 1px solid var(--border-color);">
                        <i class="ph ph-map-pin" style="color: var(--primary-color);"></i>
                        <span id="location-name" style="font-size: 0.9rem; color: var(--text-secondary);">ุฌุงุฑู ุชุญุฏูุฏ
                            ุงููููุน...</span>
                    </div>
                </div>

                <!-- Next Prayer Countdown Hero -->
                <div id="prayer-hero"
                    style="text-align: center; margin-bottom: 2.5rem; position: relative; padding: 2rem 0;">
                    <div
                        style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200px; height: 200px; background: radial-gradient(circle, var(--primary-light) 0%, transparent 70%); border-radius: 50%; z-index: -1;">
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 0.5rem; font-size: 1rem;">ุงูุตูุงุฉ ุงููุงุฏูุฉ</p>
                    <h2 id="next-prayer-name-hero"
                        style="font-size: 2.5rem; color: var(--primary-color); margin-bottom: 0.5rem; font-weight: 800;">
                        ...</h2>
                    <h1 id="prayer-countdown-hero"
                        style="font-size: 3.5rem; font-weight: 300; color: var(--text-primary); font-family: 'Outfit', sans-serif; letter-spacing: -2px;">
                        --:--:--</h1>
                    <p id="next-prayer-time-hero"
                        style="color: var(--text-secondary); margin-top: 0.5rem; font-weight: 600; direction: ltr;">
                        --:--</p>
                </div>

                <div style="text-align: center; margin-bottom: 2rem;">
                    <h3 id="hijri-date" style="font-size: 1.1rem; color: var(--primary-color); margin-bottom: 0.25rem;">
                        ...</h3>
                    <p id="gregorian-date" style="font-size: 0.9rem; color: var(--text-secondary);">...</p>
                </div>

                <!-- Prayer Times List -->
                <div id="prayer-times-list" style="display: flex; flex-direction: column; gap: 1rem;">
                    <!-- Loading State -->
                    <div class="splash-loader" style="margin: 2rem auto;"></div>
                </div>
            </div>

            <!-- VIEW: RAMADAN LIST -->
            <div id="view-ramadan-list" class="view-section hidden">
                <div class="view-header"
                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem;">
                    <button class="icon-btn" onclick="showView('home')"><i class="ph ph-caret-right"></i></button>
                    <h2 id="ramadan-list-title" class="section-title" style="margin: 0;">ุฃุฐูุงุฑ ุฑูุถุงู</h2>
                    <button class="icon-btn" onclick="resetRamadanList()"><i
                            class="ph ph-arrows-counter-clockwise"></i></button>
                </div>
                <div id="ramadan-azkar-container"></div>
            </div>

            <!-- VIEW: QURAN LIST -->
            <div id="view-quran-list" class="view-section hidden">
                <div class="view-header"
                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem;">
                    <button class="icon-btn" onclick="showView('home')"><i class="ph ph-caret-right"></i></button>
                    <h2 class="section-title" style="margin: 0;">ููุฑุณ ุงูุณูุฑ</h2>
                    <div style="width: 40px;"></div>
                </div>

                <div class="search-container" style="margin-bottom: 1.5rem; padding: 0 0.5rem;">
                    <div style="position: relative;">
                        <i class="ph ph-magnifying-glass"
                            style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                        <input type="text" id="quran-search" placeholder="ุงุจุญุซ ุนู ุณูุฑุฉ..." oninput="filterSurahs()"
                            style="width: 100%; padding: 1rem 3rem 1rem 1rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary); font-size: 1rem; outline: none; box-shadow: var(--shadow-premium);">
                    </div>
                </div>

                <div id="surah-list-container" class="categories-grid" style="grid-template-columns: 1fr; gap: 1rem;">
                    <!-- Surahs will be loaded here -->
                </div>
            </div>

            <!-- VIEW: QURAN READ -->
            <div id="view-quran-read" class="view-section hidden">
                <div class="quran-read-header">
                    <div id="quran-reading-progress" class="reading-progress-bar"></div>
                    <button class="icon-btn" onclick="showView('quran-list')"><i class="ph ph-caret-right"></i></button>
                    <div style="text-align: center;">
                        <h2 id="surah-read-title" class="section-title"
                            style="margin: 0; font-size: 1.3rem; font-family: 'Amiri', serif;">ุณูุฑุฉ...</h2>
                        <span id="surah-info-subtitle"
                            style="font-size: 0.75rem; color: var(--text-secondary);">--</span>
                    </div>

                    <div class="quran-controls">
                        <button class="quran-control-btn" onclick="saveQuranBookmark()" id="btn-save-bookmark"
                            aria-label="ุญูุธ ุงูุนูุงูุฉ"><i class="ph ph-bookmark-simple"></i></button>
                        <button class="quran-control-btn" onclick="openQuranSettings()" id="btn-quran-settings"
                            aria-label="ุฅุนุฏุงุฏุงุช ุงููุฑุงุกุฉ"><i class="ph ph-sliders"></i></button>
                        <button class="quran-control-btn active-scroll-btn" onclick="toggleAutoScroll()"
                            id="btn-auto-scroll-top" aria-label="ุชุดุบูู ุงูุชููุงุฆู"><i class="ph ph-play"></i></button>
                    </div>
                </div>

                <!-- Floating Auto-Scroll Control (Experimental/Aesthetic) -->
                <div id="floating-scroll-bar" class="hidden">
                    <div class="scroll-bar-content">
                        <button onclick="toggleAutoScroll()" class="scroll-play-btn"><i
                                class="ph ph-pause"></i></button>
                        <div class="scroll-speed-control">
                            <span class="speed-label">ุงูุณุฑุนุฉ: <span id="speed-val-display">1.0</span>x</span>
                            <input type="range" id="scroll-speed-slider" min="0.5" max="4.0" step="0.1" value="1.0"
                                oninput="updateScrollSpeedSlider()">
                        </div>
                        <button onclick="stopAutoScroll()" class="scroll-close-btn"><i class="ph ph-x"></i></button>
                    </div>
                </div>

                <div id="surah-content" class="quran-page-frame">
                    <!-- Ayahs will be loaded here -->
                </div>

                <!-- Surah Navigation Footer (New) -->
                <div class="surah-nav-footer">
                    <button class="nav-surah-btn next" onclick="goToNextSurah()">
                        <span>ุงูุณูุฑุฉ ุงูุชุงููุฉ</span>
                        <i class="ph ph-arrow-left"></i>
                    </button>
                    <button class="nav-surah-btn prev" onclick="goToPrevSurah()">
                        <i class="ph ph-arrow-right"></i>
                        <span>ุงูุณูุฑุฉ ุงูุณุงุจูุฉ</span>
                    </button>
                </div>
            </div>

            <!-- VIEW: ADHKAR DETAIL -->
            <div id="view-adhkar" class="view-section hidden">
                <div class="view-header"
                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem;">
                    <button onclick="showView('home')" class="icon-btn"><i class="ph ph-caret-right"></i></button>
                    <h2 id="adhkarTitle" class="section-title" style="margin: 0;">ุงูุฃุฐูุงุฑ</h2>
                    <div style="width: 40px;"></div>
                </div>

                <div class="dhikr-card fade-in">
                    <p id="dhikrText" class="dhikr-arabic">ุฌุงุฑู ุงูุชุญููู...</p>
                    <div class="dhikr-controls"
                        style="display: flex; justify-content: center; gap: 2rem; margin-top: 2rem;">
                        <button onclick="playAudio()" class="icon-btn" aria-label="ุงุณุชูุงุน"><i
                                class="ph ph-speaker-high"></i></button>
                        <button onclick="toggleFavorite()" id="fav-btn" class="icon-btn" aria-label="ุงูููุถูุฉ"><i
                                class="ph ph-heart"></i></button>
                    </div>
                </div>

                <div class="counter-area"
                    style="display: flex; flex-direction: column; align-items: center; margin-top: 2rem;">
                    <button id="dhikr-progress-btn" onclick="incrementDhikr()" class="main-btn"
                        style="width: 160px; height: 160px; border-radius: 50%; background: linear-gradient(135deg, #10b981, #059669); color: white; font-size: 2rem; font-weight: 800; border: 8px solid rgba(16, 185, 129, 0.2); box-shadow: var(--shadow-floating);">0
                        / 1</button>

                    <div class="nav-controls" style="display: flex; gap: 1rem; margin-top: 2.5rem; width: 100%;">
                        <button onclick="prevDhikr()" class="secondary-btn"
                            style="flex: 1; padding: 1rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary); cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-weight: 600;"><i
                                class="ph ph-caret-right"></i> ุงูุณุงุจู</button>
                        <button onclick="nextDhikr()" class="secondary-btn"
                            style="flex: 1; padding: 1rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary); cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-weight: 600;">ุงูุชุงูู
                            <i class="ph ph-caret-left"></i></button>
                    </div>
                </div>
            </div>

            <!-- VIEW: TASBEEH -->
            <div id="view-tasbeeh" class="view-section hidden">
                <div class="view-header" style="text-align: center; margin-bottom: 2rem;">
                    <h2 class="section-title">ุงูุณุจุญุฉ ุงูุฅููุชุฑูููุฉ</h2>
                </div>

                <div style="padding: 0 1rem; margin-bottom: 3rem;">
                    <select id="tasbeeh-select" onchange="changeTasbeehDhikr()"
                        style="width: 100%; padding: 1rem; border-radius: var(--radius-lg); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary); font-size: 1.1rem; outline: none; box-shadow: var(--shadow-premium);">
                        <option value="free">ุชุณุจูุญ ุญุฑ</option>
                        <option value="subhan_allah">ุณุจุญุงู ุงููู</option>
                        <option value="alhamdulillah">ุงูุญูุฏ ููู</option>
                        <option value="allahu_akbar">ุงููู ุฃูุจุฑ</option>
                        <option value="astaghfirullah">ุฃุณุชุบูุฑ ุงููู</option>
                        <option value="custom">ูุฎุตุต...</option>
                    </select>

                    <div id="custom-setup-fields" class="hidden"
                        style="margin-top: 1rem; display: flex; flex-direction: column; gap: 0.75rem;">
                        <input type="text" id="custom-text-input" placeholder="ุงูุชุจ ุงูุฐูุฑ ููุง"
                            oninput="updateCustomLabel()"
                            style="padding: 1rem; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary);">
                        <input type="number" id="custom-target-input" placeholder="ุงููุฏู (ูุซูุงู: 100)"
                            oninput="updateCustomTarget()"
                            style="padding: 1rem; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary);">
                    </div>
                </div>

                <div class="counter-area"
                    style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    <div style="text-align: center; margin-bottom: 3rem;">
                        <p id="current-tasbeeh-label"
                            style="font-size: 1.25rem; color: var(--text-secondary); margin-bottom: 0.5rem; min-height: 1.5rem;">
                        </p>
                        <h2 id="tasbeeh-counter"
                            style="font-size: 4.5rem; font-weight: 800; color: var(--primary-color);">0</h2>
                    </div>

                    <button onclick="incrementTasbeeh()" id="tasbeeh-btn"
                        style="width: 220px; height: 220px; border-radius: 50%; border: none; background: linear-gradient(135deg, #10b981, #059669); color: white; display: flex; align-items: center; justify-content: center; font-size: 3rem; box-shadow: var(--shadow-floating); position: relative; cursor: pointer;">
                        <i class="ph ph-hand-tap"></i>
                    </button>

                    <button onclick="resetTasbeeh()"
                        style="margin-top: 3rem; background: none; border: 1px solid var(--border-color); padding: 0.75rem 2.5rem; border-radius: var(--radius-full); color: var(--text-secondary); font-weight: 600; cursor: pointer;">ุชุตููุฑ</button>
                </div>
            </div>

            <!-- VIEW: FAVORITES -->
            <div id="view-favorites" class="view-section hidden">
                <h2 class="section-title" style="padding: 0 1rem; margin-bottom: 2rem;">ุงูููุถูุฉ</h2>
                <div id="favorites-list" style="padding: 0 1rem;"></div>
            </div>

            <!-- VIEW: SETTINGS -->
            <div id="view-settings" class="view-section hidden">
                <h2 class="section-title" id="settings-title" style="padding: 0 1rem; margin-bottom: 2rem;">ุงูุฅุนุฏุงุฏุงุช
                </h2>
                <div style="padding: 0 1rem; display: flex; flex-direction: column; gap: 1rem;">
                    <div class="category-card" onclick="toggleTheme()"
                        style="flex-direction: row; justify-content: space-between; width: 100%; padding: 1.25rem 1.5rem;">
                        <span id="label-night-mode">ุงููุถุน ุงููููู</span>
                        <i class="ph ph-moon-stars" style="font-size: 1.5rem;"></i>
                    </div>
                    <div class="category-card" onclick="toggleLanguage()"
                        style="flex-direction: row; justify-content: space-between; width: 100%; padding: 1.25rem 1.5rem;">
                        <span id="label-language">ุงููุบุฉ</span>
                        <span id="current-lang-text"
                            style="color: var(--primary-color); font-weight: 800;">ุงูุนุฑุจูุฉ</span>
                    </div>

                    <div
                        style="background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 1.5rem; margin-top: 1rem;">
                        <h3 id="label-calc-method"
                            style="margin-bottom: 1rem; font-size: 1.1rem; display: flex; align-items: center; gap: 0.75rem;">
                            <i class="ph ph-globe-hemisphere-east" style="color: var(--primary-color);"></i>
                            ุทุฑููุฉ ุงูุญุณุงุจ
                        </h3>
                        <!-- Calculation Method -->
                        <div style="margin-bottom: 1rem;">
                            <label
                                style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                                ุทุฑููุฉ ุงูุญุณุงุจ (Calculation Method)
                            </label>
                            <select id="calc-method" onchange="saveSettings()"
                                style="width: 100%; padding: 0.75rem; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary); outline: none;">
                                <option value="4">Umm Al-Qura (Makkah)</option>
                                <option value="5">Egyptian General Authority of Survey</option>
                                <option value="3">Muslim World League</option>
                                <option value="2">ISNA (North America)</option>
                                <option value="1">University of Islamic Sciences, Karachi</option>
                                <option value="12">Union Organization islamic de France</option>
                                <option value="13">Diyanet Isleri Baskanligi, Turkey</option>
                            </select>
                        </div>

                        <!-- Asr Method (Madhab) -->
                        <div style="margin-bottom: 1rem;">
                            <label
                                style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                                ูุฐูุจ ุงูุนุตุฑ (Asr Method)
                            </label>
                            <select id="asr-method" onchange="saveSettings()"
                                style="width: 100%; padding: 0.75rem; border-radius: var(--radius-md); border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary); outline: none;">
                                <option value="0">Shafi, Maliki, Hanbali (Standard)</option>
                                <option value="1">Hanafi</option>
                            </select>
                        </div>
                    </div>

                    <div
                        style="background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 1.5rem; margin-top: 1rem;">
                        <h3 id="label-appearance"
                            style="margin-bottom: 1rem; font-size: 1.1rem; display: flex; align-items: center; gap: 0.75rem;">
                            <i class="ph ph-sliders-horizontal" style="color: var(--primary-color);"></i>
                            ุงููุธูุฑ ูุงูุถุจุท
                        </h3>

                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <span id="location-name-settings"
                                style="font-size: 0.9rem; color: var(--text-secondary);">Loading...</span>
                            <button onclick="fetchPrayerTimes(true)" class="icon-btn"
                                style="font-size: 0.9rem; padding: 0.25rem 0.5rem; height: auto;">
                                <i class="ph ph-arrows-clockwise"></i>
                            </button>
                        </div>
                        <!-- Font Size -->
                        <div style="margin-bottom: 1.5rem;">
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;"
                                id="label-font-size">ุญุฌู ุงูุฎุท</p>
                            <div
                                style="display: flex; gap: 0.5rem; background: var(--bg-color); padding: 0.5rem; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
                                <button onclick="setFontSize('small')" class="secondary-btn"
                                    style="flex: 1; padding: 0.5rem; font-size: 0.8rem;">A</button>
                                <button onclick="setFontSize('medium')" class="secondary-btn"
                                    style="flex: 1; padding: 0.5rem; font-size: 1rem; font-weight: bold;">A</button>
                                <button onclick="setFontSize('large')" class="secondary-btn"
                                    style="flex: 1; padding: 0.5rem; font-size: 1.2rem; font-weight: 800;">A</button>
                            </div>
                        </div>

                        <!-- Hijri Adjustment -->
                        <div>
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;"
                                id="label-hijri-adj">ุชุนุฏูู ุงูุชุงุฑูุฎ ุงููุฌุฑู</p>
                            <div style="display: flex; align-items: center; gap: 1rem; justify-content: center;">
                                <button onclick="adjustHijri(-1)" class="icon-btn"
                                    style="background: var(--bg-color); width: 32px; height: 32px;"><i
                                        class="ph ph-minus"></i></button>
                                <span id="hijri-adj-value"
                                    style="font-weight: 700; width: 60px; text-align: center;">0</span>
                                <button onclick="adjustHijri(1)" class="icon-btn"
                                    style="background: var(--bg-color); width: 32px; height: 32px;"><i
                                        class="ph ph-plus"></i></button>
                            </div>
                        </div>
                    </div>

                    <div
                        style="background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 1.5rem; margin-top: 1rem;">
                        <h3 id="label-reminders"
                            style="margin-bottom: 1.5rem; font-size: 1.1rem; display: flex; align-items: center; gap: 0.75rem;">
                            <i class="ph ph-bell-ringing" style="color: var(--primary-color);"></i>
                            ุชุฐููุฑ ุงูุฃุฐูุงุฑ
                        </h3>

                        <div style="margin-bottom: 1rem;">
                            <label class="switch"
                                style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                                <span id="label-enable-reminder"
                                    style="font-size: 1rem; color: var(--text-primary);">ุชูุนูู ุงูุชูุจููุงุช</span>
                                <input type="checkbox" id="reminder-toggle" onchange="toggleReminder(this.checked)">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div id="reminder-settings" style="display: none; flex-direction: column; gap: 1rem;">
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">ุฐูุฑูู ูู:</p>
                            <div style="display: flex; gap: 0.5rem;">
                                <div style="flex: 1;">
                                    <label
                                        style="font-size: 0.8rem; color: var(--text-secondary); display: block; margin-bottom: 0.25rem;">ุณุงุนุงุช</label>
                                    <input type="number" id="reminder-hours" min="0" max="23" value="0"
                                        style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-color); color: var(--text-primary); font-family: inherit; text-align: center;">
                                </div>
                                <div style="flex: 1;">
                                    <label
                                        style="font-size: 0.8rem; color: var(--text-secondary); display: block; margin-bottom: 0.25rem;">ุฏูุงุฆู</label>
                                    <input type="number" id="reminder-minutes" min="1" max="59" value="30"
                                        style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-color); color: var(--text-primary); font-family: inherit; text-align: center;">
                                </div>
                            </div>
                            <div style="margin-top: 1rem;">
                                <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
                                    ุฎูุงุฑุงุช ุณุฑูุนุฉ:</p>
                                <div style="display: flex; gap: 0.5rem; overflow-x: auto; padding-bottom: 0.5rem;">
                                    <button onclick="setReminderPreset(0, 15)" class="preset-btn">15ุฏ</button>
                                    <button onclick="setReminderPreset(0, 30)" class="preset-btn">30ุฏ</button>
                                    <button onclick="setReminderPreset(1, 0)" class="preset-btn">1ุณ</button>
                                    <button onclick="setReminderPreset(2, 0)" class="preset-btn">2ุณ</button>
                                </div>
                            </div>

                            <!-- Quiet Hours -->
                            <div
                                style="background: var(--bg-color); padding: 1rem; border-radius: var(--radius-md); border: 1px solid var(--border-color); margin-top: 1rem;">
                                <div
                                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <p style="font-size: 0.9rem; font-weight: 600;">ุณุงุนุงุช ุงููุฏูุก</p>
                                    <label class="switch" style="transform: scale(0.8);">
                                        <input type="checkbox" id="quiet-toggle"
                                            onchange="toggleQuietHours(this.checked)">
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                                <div id="quiet-inputs" style="display: flex; gap: 0.5rem; display: none;">
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.7rem; color: var(--text-secondary);">ูู</label>
                                        <input type="time" id="quiet-start"
                                            style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--card-bg); color: var(--text-primary);">
                                    </div>
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.7rem; color: var(--text-secondary);">ุฅูู</label>
                                        <input type="time" id="quiet-end"
                                            style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--card-bg); color: var(--text-primary);">
                                    </div>
                                </div>
                            </div>

                            <button onclick="saveReminderSettings()" class="main-btn"
                                style="width: 100%; padding: 0.75rem; border-radius: var(--radius-md); background: var(--primary-color); color: white; font-weight: 700;">ุญูุธ
                                ุงูุฅุนุฏุงุฏุงุช</button>
                        </div>
                        <p id="reminder-status"
                            style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 1rem;"></p>
                    </div>
                </div>
            </div>

            <!-- Toast Container -->
            <div id="toast-container"></div>
            <!-- Qibla View -->
            <div id="view-qibla" class="view-section hidden">
                <div class="header-glass">
                    <h2 class="page-title">ุงุชุฌุงู ุงููุจูุฉ</h2>
                    <p class="page-subtitle" id="qibla-status" style="font-size: 0.8rem; opacity: 0.8;">ุฌุงุฑู ุชุญุฏูุฏ
                        ุงููููุน...</p>
                </div>

                <div class="content-spacer">
                    <div
                        style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 50vh;">

                        <div class="compass-container">
                            <div id="compass-dial" class="compass-dial">
                                <div class="compass-mark N">N</div>
                                <div class="compass-mark E">E</div>
                                <div class="compass-mark S">S</div>
                                <div class="compass-mark W">W</div>
                                <div id="qibla-pointer" class="qibla-pointer">
                                    <i class="ph-fill ph-kaaba"></i>
                                </div>
                            </div>
                            <div class="compass-center"></div>
                        </div>

                        <div style="margin-top: 2rem; text-align: center;">
                            <p id="qibla-deg" style="font-size: 2rem; font-weight: 800; color: var(--primary-color);">
                                --ยฐ</p>
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">ุฏุฑุฌุฉ ุงููุจูุฉ ูู ุงูุดูุงู</p>
                            <button onclick="initQibla()" class="icon-btn"
                                style="margin-top: 1rem; width: auto; padding: 0.5rem 1rem; border-radius: var(--radius-full);">
                                <i class="ph ph-arrows-clockwise"></i> ุฅุนุงุฏุฉ ูุนุงูุฑุฉ
                            </button>
                        </div>

                        <div id="calibration-msg"
                            style="display: none; margin-top: 1rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius-md); border: 1px solid var(--border-color); text-align: center;">
                            <i class="ph ph-infinity" style="font-size: 2rem; color: var(--primary-color);"></i>
                            <p style="font-size: 0.85rem; margin-top: 0.5rem;">ูุฑุฌู ุชุญุฑูู ุงููุงุชู ุนูู ุดูู ุฑูู 8 ูููุนุงูุฑุฉ
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="showView('home')" id="nav-home">
            <i class="ph ph-house"></i>
            <span id="nav-label-home">ุงูุฑุฆูุณูุฉ</span>
        </button>
        <button class="nav-item" onclick="initQiblaView()" id="nav-qibla">
            <i class="ph ph-compass"></i>
            <span>ุงููุจูุฉ</span>
        </button>
        <button class="nav-item" onclick="showView('tasbeeh')" id="nav-tasbeeh">
            <i class="ph ph-hand-tap"></i>
            <span id="nav-label-tasbeeh">ุงูุชุณุจูุญ</span>
        </button>
        <button class="nav-item" onclick="showView('favorites')" id="nav-favorites">
            <i class="ph ph-heart"></i>
            <span id="nav-label-favorites">ุงูููุถูุฉ</span>
        </button>
        <button class="nav-item" onclick="showView('settings')" id="nav-settings">
            <i class="ph ph-gear"></i>
            <span id="nav-label-settings">ุงูุฅุนุฏุงุฏุงุช</span>
        </button>
    </nav>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>

    <!-- Quran Settings Modal -->
    <div id="modal-quran-settings" class="modal-overlay hidden">
        <div class="modal-content fade-in">
            <div class="modal-header">
                <h3>ุฅุนุฏุงุฏุงุช ุงููุฑุงุกุฉ</h3>
                <button onclick="closeQuranSettings()" class="icon-btn"><i class="ph ph-x"></i></button>
            </div>
            <div class="modal-body">
                <!-- Reading Mode -->
                <div class="setting-group">
                    <label>ููุท ุงูุนุฑุถ</label>
                    <div class="toggle-group">
                        <button onclick="setReadingMode('vertical')" id="mode-vertical"
                            class="toggle-btn active">ุทููู</button>
                        <button onclick="setReadingMode('horizontal')" id="mode-horizontal" class="toggle-btn">ุนุฑุถู
                            (ุตูุญุงุช)</button>
                    </div>
                </div>

                <!-- Font Selection -->
                <div class="setting-group">
                    <label>ููุน ุงูุฎุท</label>
                    <select id="quran-font-select" onchange="changeQuranFont()">
                        <option value="'Amiri', serif">ุฎุท ูุตุญู (Amiri)</option>
                        <option value="'Inter', sans-serif">ุฎุท ุนุตุฑู (Inter)</option>
                        <option value="'Outfit', sans-serif">ุฎุท ุฏุงุฆุฑู (Outfit)</option>
                    </select>
                </div>

                <!-- Reciter Selection -->
                <div class="setting-group">
                    <label>ุงููุงุฑุฆ ุงูููุถู (ููุชูุงูุฉ)</label>
                    <select id="quran-reciter-select" onchange="changeQuranReciter()">
                        <option value="ar.alafasy">ูุดุงุฑู ุฑุงุดุฏ ุงูุนูุงุณู</option>
                        <option value="ar.abdulbasitmurattal">ุนุจุฏ ุงูุจุงุณุท ุนุจุฏ ุงูุตูุฏ</option>
                        <option value="ar.mahermuaiqly">ูุงูุฑ ุงููุนูููู</option>
                        <option value="ar.minshawi">ูุญูุฏ ุตุฏูู ุงูููุดุงูู</option>
                        <option value="ar.husary">ูุญููุฏ ุฎููู ุงูุญุตุฑู</option>
                    </select>
                </div>

                <!-- Themes -->
                <div class="setting-group">
                    <label>ุณูุฉ ุงููุฑุงุกุฉ</label>
                    <div class="theme-grid">
                        <div class="theme-option theme-white active" onclick="setQuranTheme('white')"><span>ุฃุจูุถ</span>
                        </div>
                        <div class="theme-option theme-sepia" onclick="setQuranTheme('sepia')"><span>ูุฑูู</span></div>
                        <div class="theme-option theme-dark" onclick="setQuranTheme('dark')"><span>ูููู</span></div>
                        <div class="theme-option theme-uthmanic" onclick="setQuranTheme('uthmanic')"><span>ุนุซูุงูู</span>
                        </div>
                    </div>
                </div>

                <!-- Tafseer Toggle -->
                <div class="setting-group">
                    <label class="switch-label">
                        <span>ุฅุธูุงุฑ ุงูุชูุณูุฑ ุฏุงุฆูุงู</span>
                        <input type="checkbox" id="tafseer-toggle-global" onchange="toggleTafseerVisibility()">
                    </label>
                </div>
            </div>
        </div>
    </div>
</body>

</html>